<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<title>GAP (profiling) - Chapter 2: Functionality provided by the profiling package</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="GAPDoc2HTML" />
<link rel="stylesheet" type="text/css" href="manual.css" />
<script src="manual.js" type="text/javascript"></script>
<script type="text/javascript">overwriteStyle();</script>
</head>
<body class="chap2"  onload="jscontent()">


<div class="chlinktop"><span class="chlink1">Goto Chapter: </span><a href="chap0_mj.html">Top</a>  <a href="chap1_mj.html">1</a>  <a href="chap2_mj.html">2</a>  <a href="chapInd_mj.html">Ind</a>  </div>

<div class="chlinkprevnexttop">&nbsp;<a href="chap0_mj.html">[Top of Book]</a>&nbsp;  <a href="chap0_mj.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap1_mj.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chapInd_mj.html">[Next Chapter]</a>&nbsp;  </div>

<p id="mathjaxlink" class="pcenter"><a href="chap2.html">[MathJax off]</a></p>
<p><a id="X7DAD51718553414E" name="X7DAD51718553414E"></a></p>
<div class="ChapSects"><a href="chap2_mj.html#X7DAD51718553414E">2 <span class="Heading">Functionality provided by the <strong class="pkg">profiling</strong> package</span></a>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X824EFBE480A1360F">2.1 <span class="Heading">Reading line-by-line profiles</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X82664B2C80EBA9A4">2.1-1 ReadLineByLineProfile</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X7D11F90387AEF584">2.1-2 MergeLineByLineProfiles</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X8412FE417B2C715D">2.2 <span class="Heading">Generating flame graphs</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X858B23AD78A2A73A">2.2-1 OutputFlameGraph</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X7C6110C180DE1785">2.2-2 OutputFlameGraphInput</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X83A7B4B07A62FB8F">2.3 <span class="Heading">Generating coverage reports</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X87AFADF581A7C1FD">2.3-1 OutputAnnotatedCodeCoverageFiles</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X8436F6FE84513AC9">2.3-2 OutputJsonCoverage</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X86CA50397AB60E33">2.3-3 OutputCoverallsJsonCoverage</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X7C5563A37D566DA5">2.4 <span class="Heading">Miscellaneous</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X849267DE7D84CBBE">2.4-1 LineByLineProfileFunction</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X7B979D50793E455A">2.4-2 ProfileFile</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X80F26AB17D5D8752">2.4-3 ProfilePackage</a></span>
</div></div>
</div>

<h3>2 <span class="Heading">Functionality provided by the <strong class="pkg">profiling</strong> package</span></h3>

<p><a id="X824EFBE480A1360F" name="X824EFBE480A1360F"></a></p>

<h4>2.1 <span class="Heading">Reading line-by-line profiles</span></h4>

<p><a id="X82664B2C80EBA9A4" name="X82664B2C80EBA9A4"></a></p>

<h5>2.1-1 ReadLineByLineProfile</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; ReadLineByLineProfile</code>( <var class="Arg">filename</var> )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Read <var class="Arg">filename</var>, a line by line profile which was previously generated by GAP, using ProfileLineByLine or CoverageLineByLine functions from core GAP. A parsed profile can be transformed into a human-readable form using either <code class="func">OutputAnnotatedCodeCoverageFiles</code> (<a href="chap2_mj.html#X87AFADF581A7C1FD"><span class="RefLink">2.3-1</span></a>) or <code class="func">OutputFlameGraph</code> (<a href="chap2_mj.html#X858B23AD78A2A73A"><span class="RefLink">2.2-1</span></a>)</p>

<p><a id="X7D11F90387AEF584" name="X7D11F90387AEF584"></a></p>

<h5>2.1-2 MergeLineByLineProfiles</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; MergeLineByLineProfiles</code>( <var class="Arg">filenames</var> )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Read <var class="Arg">filenames</var>, a list of line by line profiles which were previously generated by GAP, using ProfileLineByLine or CoverageLineByLine functions from core GAP. The elements of <var class="Arg">filenames</var> can be either filenames, or files previously parsed by <code class="func">ReadLineByLineProfile</code> (<a href="chap2_mj.html#X82664B2C80EBA9A4"><span class="RefLink">2.1-1</span></a>).</p>

<p><a id="X8412FE417B2C715D" name="X8412FE417B2C715D"></a></p>

<h4>2.2 <span class="Heading">Generating flame graphs</span></h4>

<p>A 'flame graph' is a method of visualising where time is spent by a program.</p>

<p><a id="X858B23AD78A2A73A" name="X858B23AD78A2A73A"></a></p>

<h5>2.2-1 OutputFlameGraph</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; OutputFlameGraph</code>( <var class="Arg">codecover</var>[, <var class="Arg">filename</var>] )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Generate an 'svg' file which represents a 'flame graph', a method of visualising where time is spent by a program.</p>

<p><var class="Arg">codecover</var> should either be a profile previously read by <code class="file">ReadLineByLineProfile</code>, or the filename of a profile.</p>

<p>The flame graph input will be written to <var class="Arg">filename</var> (or returned as a string if <var class="Arg">filename</var> is not present).</p>

<p><a id="X7C6110C180DE1785" name="X7C6110C180DE1785"></a></p>

<h5>2.2-2 OutputFlameGraphInput</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; OutputFlameGraphInput</code>( <var class="Arg">codecover</var>[, <var class="Arg">filename</var>] )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Generate the input required to draw a 'flame graph', a method of visualising where time is spent by a program. One program for drawing flame graphs using this output can be found at <span class="URL"><a href="https://github.com/brendangregg/FlameGraph">https://github.com/brendangregg/FlameGraph</a></span></p>

<p><var class="Arg">codecover</var> should either be a profile previously read by <code class="file">ReadLineByLineProfile</code>, or the filename of a profile.</p>

<p>The flame graph input will be written to <var class="Arg">filename</var> (or returned as a string if <var class="Arg">filename</var> is not present).</p>

<p><a id="X83A7B4B07A62FB8F" name="X83A7B4B07A62FB8F"></a></p>

<h4>2.3 <span class="Heading">Generating coverage reports</span></h4>

<p><a id="X87AFADF581A7C1FD" name="X87AFADF581A7C1FD"></a></p>

<h5>2.3-1 OutputAnnotatedCodeCoverageFiles</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; OutputAnnotatedCodeCoverageFiles</code>( <var class="Arg">codecover</var>[, <var class="Arg">indir</var>], <var class="Arg">outdir</var> )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Takes a previously generated profile and outputs HTML which shows which lines of code were executed, and (if this was originally recorded) how long was spent executing these lines of code.</p>

<p><var class="Arg">codecover</var> should either be a profile previously read by <code class="file">ReadLineByLineProfile</code>, or the filename of a profile which will first be read with <code class="file">ReadLineByLineProfile</code>.</p>

<p>Files will be written to the directory <var class="Arg">outdir</var>.</p>

<p>The optional second argument gives a filter, only information about filenames starting with <var class="Arg">indir</var> will be outputted.</p>

<p><a id="X8436F6FE84513AC9" name="X8436F6FE84513AC9"></a></p>

<h5>2.3-2 OutputJsonCoverage</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; OutputJsonCoverage</code>( <var class="Arg">cover</var>, <var class="Arg">outfile</var> )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Takes a previously generated profile and outputs a json coverage file which is amongst other things accepted by codecov.io.</p>

<p><var class="Arg">codecover</var> should either be a profile previously read by <code class="file">ReadLineByLineProfile</code>, or the filename of a profile which will first be read with <code class="file">ReadLineByLineProfile</code>.</p>

<p>The output will be written to the file <var class="Arg">outfile</var>.</p>

<p><a id="X86CA50397AB60E33" name="X86CA50397AB60E33"></a></p>

<h5>2.3-3 OutputCoverallsJsonCoverage</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; OutputCoverallsJsonCoverage</code>( <var class="Arg">cover</var>, <var class="Arg">outfile</var>, <var class="Arg">pathtoremove</var>[, <var class="Arg">opt</var>] )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Takes a previously generated profile and outputs a json coverage file which is accepted by coveralls.io.</p>

<p><var class="Arg">cover</var> should either be a profile previously read by <code class="file">ReadLineByLineProfile</code>, or the filename of a profile which will first be read with <code class="file">ReadLineByLineProfile</code>. <var class="Arg">pathtoremove</var> is the path to the tested repository; this path prefix will be removed from all filenames in <var class="Arg">cover</var>. Finally, <var class="Arg">opt</var> is a record. Its key/value pairs are directly inserted into the produced JSON, in the form of a JSON dictionary. This can be used to set the <code class="code">service_name</code>, <code class="code">service_job_id</code>, and more. If this record is not given, we try to guess the correct values based on the environment (currently only supported for Travis and AppVeyor).</p>

<p>The output will be written to the file <var class="Arg">outfile</var>.</p>

<p><a id="X7C5563A37D566DA5" name="X7C5563A37D566DA5"></a></p>

<h4>2.4 <span class="Heading">Miscellaneous</span></h4>

<p><a id="X849267DE7D84CBBE" name="X849267DE7D84CBBE"></a></p>

<h5>2.4-1 LineByLineProfileFunction</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; LineByLineProfileFunction</code>( <var class="Arg">function</var>, <var class="Arg">arguments</var> )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Calls <var class="Arg">function</var> with the list of arguments <var class="Arg">arguments</var>, and opens a time profile of the resulting call in the default web browser.</p>

<p><a id="X7B979D50793E455A" name="X7B979D50793E455A"></a></p>

<h5>2.4-2 ProfileFile</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; ProfileFile</code>( <var class="Arg">file</var>[, <var class="Arg">opts</var>] )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Returns: a string</p>

<p>Tests the file with name <var class="Arg">file</var> in another GAP session, and produces a code coverage report of lines that were executed in the process. If <var class="Arg">file</var> ends with <code class="code">.tst</code> it will be called with <code class="code">Test</code>; otherwise, it will be run directly.</p>

<p>The optional argument <var class="Arg">opts</var> should be a record, and may contain any of the following components:</p>


<ul>
<li><p><code class="code">outdir</code>: a string denoting the directory into which the HTML files of the report will be placed (a temporary directory by default);</p>

</li>
<li><p><code class="code">indir</code>: a string such that only file paths beginning with <code class="code">indir</code> will be profiled (default <code class="code">""</code>);</p>

</li>
<li><p><code class="code">showOutput</code>: a boolean denoting whether to print test output to the screen (default <code class="code">true</code>);</p>

</li>
<li><p><code class="code">open</code>: a boolean denoting whether to open the report in a web browser on completion (default <code class="code">false</code>).</p>

</li>
</ul>
<p>This function returns the location of an HTML file containing the report.</p>

<p><a id="X80F26AB17D5D8752" name="X80F26AB17D5D8752"></a></p>

<h5>2.4-3 ProfilePackage</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; ProfilePackage</code>( <var class="Arg">pkg_name</var>[, <var class="Arg">opts</var>] )</td><td class="tdright">(&nbsp;function&nbsp;)</td></tr></table></div>
<p>Returns: a string</p>

<p>If <var class="Arg">pkg_name</var> is the name of an installed package, then this function runs that package's test suite and produces a report on the code coverage of files inside the package. The string returned denotes the location of an HTML file containing the report. The optional argument <var class="Arg">opts</var> behaves the same as in <code class="func">ProfileFile</code> (<a href="chap2_mj.html#X7B979D50793E455A"><span class="RefLink">2.4-2</span></a>).</p>


<div class="chlinkprevnextbot">&nbsp;<a href="chap0_mj.html">[Top of Book]</a>&nbsp;  <a href="chap0_mj.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap1_mj.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chapInd_mj.html">[Next Chapter]</a>&nbsp;  </div>


<div class="chlinkbot"><span class="chlink1">Goto Chapter: </span><a href="chap0_mj.html">Top</a>  <a href="chap1_mj.html">1</a>  <a href="chap2_mj.html">2</a>  <a href="chapInd_mj.html">Ind</a>  </div>

<hr />
<p class="foot">generated by <a href="http://www.math.rwth-aachen.de/~Frank.Luebeck/GAPDoc">GAPDoc2HTML</a></p>
</body>
</html>
